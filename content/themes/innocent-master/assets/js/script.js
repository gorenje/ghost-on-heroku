jQuery(function(a){function b(){a("pre code").each(function(a,b){hljs.highlightBlock(b)})}function c(){a("#wrapper").fitVids()}function d(){a('[href^="'+window.location.href+'"], .post-meta a, .pagination a').each(function(){var b=a(this);b.hasClass("subscribe")||(b.addClass("js-ajax-link"),b.attr("href").indexOf("page")>-1?b.addClass("js-archive-index"):b.addClass("js-show-index"),b.attr("href").indexOf("tag")>-1&&b.addClass("js-tag-index"),b.attr("href").indexOf("author")>-1&&b.addClass("js-author-index"))})}function e(){"undefined"==typeof disqus?a(".post-comments").css({display:"none"}):a.ajax({type:"GET",url:"//"+disqus+".disqus.com/embed.js",dataType:"script",cache:!0})}function f(){d(),b(),c(),e()}var g=a("body");b(),c(),d(),e();var h=window.History,i=!1,j=a("#ajax-container");if(!h.enabled)return!1;h.Adapter.bind(window,"statechange",function(){var b=h.getState();a.get(b.url,function(b){var c=a(b),d=a("#ajax-container",c).contents(),e=b.match(/<title>(.*?)<\/title>/)[1];j.fadeOut(500,function(){document.title=e,j.html(d),g.removeClass(),g.addClass(a("#body-class").attr("class")),a("html").removeClass("loading"),NProgress.done(),f(),i=!1,j.fadeIn(500)})})}),a("body").on("click",".js-ajax-link",function(b){if(b.preventDefault(),!1===i){var c=h.getState(),d=a(this).prop("href"),e=a(this).attr("title")||null;d.replace(/\/$/,"")!==c.url.replace(/\/$/,"")&&(i=!0,a("html").addClass("loading"),NProgress.start(),h.pushState({},e,d))}})});